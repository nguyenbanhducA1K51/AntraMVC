@model ApplicationCore.Models.MovieDetailsModel;

<div class="container mt-5">
    <div class=" row">
        <div class="col-md-4">
            <img src="@Model.PosterURL" alt="@Model.Title" class="img-fluid rounded"/>
        </div>
        <div class="col-md-8">
            <h2>@Model.Title</h2>
            <h5 class="text-muted"> @Model.TagLine</h5>
            <p class="mt-3">
                <strong>Overview:</strong>@Model.Overview
            </p>
            <p>
                <strong>Budget:</strong> @Model.Budget.ToString("C")
                <strong>Revenue:</strong>@Model.Revenue.ToString("C")
            </p>
            
            
            <div class="modal fade" id="buyModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <span>
                                Price: @(Model.Price?.ToString("C") ?? "Not Available")
                            </span>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            
                            @if (Model.Price.HasValue)
                            {
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary">Buy Now</button>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="reviewModalLabel">Review: @Model.Title</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="reviewForm">
                                <div class="mb-3">
                                    <label for="ratingSelect" class="form-label">Your Rating (1-10)</label>
                                    <select class="form-select" id="ratingSelect" required>
                                        <option value="" selected disabled>Select rating</option>
                                        @for (int i = 1; i <= 10; i++)
                                        {
                                            <option value="@i">@i</option>
                                        }
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="reviewText" class="form-label">Your Review</label>
                                    <textarea class="form-control" id="reviewText" rows="4" required 
                                  placeholder="Share your thoughts about this movie..."></textarea>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" form="reviewForm" class="btn btn-primary">Submit Review</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <button type="button" class="btn btn-primary" 
                        data-bs-toggle="modal"
                        data-bs-target="#buyModal"
                        data-movie-price="@Model.Price">
                    Buy Movie
                </button>
                <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#reviewModal">
                    Review
                </button>
                
                @* <a asp-action="Edit" asp-controller="Movies" asp-route-id ="@Model.Id" *@
                @*    class="btn btn-primary me-2">Edit</a> *@
                @* <form asp-action="DeleteMovie" asp-controller="Movies" asp-route-id="@Model.Id" method="post" class="mt-2"> *@
                @*     <button type="submit" class="btn bg-danger" onclick="return confirm('Are you sure you want to delete  this movie?')"> *@
                @*         Delete *@
                @*     </button> *@
                @* </form> *@
            </div>
        </div>
        
        
    </div>
    
    
    @* <div class="row"> *@
    @* *@
    @*     <div class="col-md-6"> *@
    @*         <div class="card mb-4"> *@
    @*             <div class="card-header bg-dark text-white"> *@
    @*                 <h5 class="mb-0">Movie Facts</h5> *@
    @*             </div> *@
    @*             <ul class="list-group list-group-flush"> *@
    @*                 <li class="list-group-item d-flex justify-content-between align-items-center"> *@
    @*                     <span class="fw-bold">Release Date:</span> *@
    @*                     <span>@Model.ReleaseDate.ToString("MMMM dd, yyyy")</span> *@
    @*                 </li> *@
    @*                 <li class="list-group-item d-flex justify-content-between align-items-center"> *@
    @*                     <span class="fw-bold">Runtime:</span> *@
    @*                     <span>@(Model.RunTime / 60)h @(Model.RunTime % 60)m</span> *@
    @*                 </li> *@
    @*                 <li class="list-group-item d-flex justify-content-between align-items-center"> *@
    @*                     <span class="fw-bold">Budget:</span> *@
    @*                     <span>@(Model.Budget?.ToString("C0") ?? "N/A")</span> *@
    @*                 </li> *@
    @*                 <li class="list-group-item d-flex justify-content-between align-items-center"> *@
    @*                     <span class="fw-bold">Revenue:</span> *@
    @*                     <span>@(Model.Revenue?.ToString("C0") ?? "N/A")</span> *@
    @*                 </li> *@
    @*                 <li class="list-group-item"> *@
    @*                     <span class="fw-bold">Overview:</span> *@
    @*                     <p class="mt-2 mb-0">@Model.Overview</p> *@
    @*                 </li> *@
    @*             </ul> *@
    @*         </div> *@
    @* *@
    @*         <!-- Trailers List Group --> *@
    @*         <div class="card"> *@
    @*             <div class="card-header bg-dark text-white"> *@
    @*                 <h5 class="mb-0">Trailers</h5> *@
    @*             </div> *@
    @*             <div class="list-group list-group-flush"> *@
    @*                 @foreach (var trailer in Model.Trailers) *@
    @*                 { *@
    @*                     <a href="@trailer.TrailerUrl" class="list-group-item list-group-item-action" target="_blank"> *@
    @*                         <div class="d-flex w-100 justify-content-between"> *@
    @*                             <h6 class="mb-1">@trailer.Name</h6> *@
    @*                             <small>@trailer.TrailerType</small> *@
    @*                         </div> *@
    @*                         <small>Click to watch</small> *@
    @*                     </a> *@
    @*                 } *@
    @*                 @if (!Model.Trailers.Any()) *@
    @*                 { *@
    @*                     <div class="list-group-item">No trailers available</div> *@
    @*                 } *@
    @*             </div> *@
    @*         </div> *@
    @*     </div> *@
    @* *@
    @*     <!-- Second Column - Cast --> *@
    @*     <div class="col-md-6"> *@
    @*         <div class="card"> *@
    @*             <div class="card-header bg-dark text-white"> *@
    @*                 <h5 class="mb-0">Cast</h5> *@
    @*             </div> *@
    @*             <div class="list-group list-group-flush"> *@
    @*                 @foreach (var cast in Model.Casts) *@
    @*                 { *@
    @*                     <a asp-controller="Cast" asp-action="Details" asp-route-id="@cast.Id"  *@
    @*                        class="list-group-item list-group-item-action"> *@
    @*                         <div class="d-flex align-items-center"> *@
    @*                             <img src="@cast.ProfilePath"  *@
    @*                                  class="rounded-circle me-3"  *@
    @*                                  alt="@cast.Name"  *@
    @*                                  style="width: 50px; height: 50px; object-fit: cover;"> *@
    @*                             <div> *@
    @*                                 <h6 class="mb-1">@cast.Name</h6> *@
    @*                                 <small class="text-muted">@cast.Character</small> *@
    @*                             </div> *@
    @*                         </div> *@
    @*                     </a> *@
    @*                 } *@
    @*                 @if (!Model.Casts.Any()) *@
    @*                 { *@
    @*                     <div class="list-group-item">No cast information available</div> *@
    @*                 } *@
    @*             </div> *@
    @*         </div> *@
    @*     </div> *@
    @* </div> *@
</div>

